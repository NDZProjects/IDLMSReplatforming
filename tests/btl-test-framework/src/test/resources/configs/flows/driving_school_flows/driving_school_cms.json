{
  "metadata": {
    "epic": "Driving School Flows",
    "feature": "CMS",
    "severity": "critical",
    "tags": ["driving-school", "admin", "cms"],
    "expectedResults": [
      "Driving school creation should succeed with status 201.",
      "Driving school update should succeed with status 200.",
      "Driving school status toggle should succeed with status 200."
    ]
  },
  "steps": [
    {
      "story": "01: Admin creates a driving school",
      "name": "driving_school_cms: Admin creates a driving School",
      "method": "POST",
      "path": "driving-school",
      "requires": ["token"],
      "body": {
        "name": "Test Driving School ${randomString:8}",
        "email": "tdscool.${randomString:8}@mailinnator.com",
        "logo": "${randomString:10}",
        "phone": "${phoneNumber:090,11}",
        "stateId": 25,
        "lgaId": 518,
        "address": "46 Agbado Ijaye, Ikeja, Lagos",
        "isActive": 0,
        "trainingDurations": [3, 6, 9]
      },
      "extract": {
        "drivingSchoolId": "data.id",
        "name": "data.name",
        "email": "data.email",
        "phone": "data.phone"
      },
      "assertions": {
        "status": 201,
        "body": {
          "id": {
            "success": true
          }
        }
      }
    },
    {
      "story": "02: Admin updates a driving school",
      "name": "driving_school_cms: Update a driving School",
      "method": "PATCH",
      "path": "driving-school",
      "requires": ["token", "drivingSchoolId", "name", "email", "phone"],
      "body": {
        "id": "${drivingSchoolId}",
        "name": "${name}",
        "email": "${email}",
        "phone": "${phone}",
        "stateId": 25,
        "lgaId": 518,
        "address": "Swift Ave, Lekki Phase 1, Leki, Lagos",
        "isActive": 1,
        "trainingDurations": [3, 6, 9]
      },
      "assertions": {
        "status": 200
      }
    },
    {
      "story": "03: Admin toggles driving school status",
      "name": "driving_school_cms: Driving School Toggle Status",
      "method": "PATCH",
      "path": "driving-school/toggle-status/${drivingSchoolId}",
      "requires": ["token", "drivingSchoolId"],
      "body": {
        "status": "0"
      },
      "assertions": {
        "status": 200
      }
    }
  ]
}
